(this["webpackJsonp2.6"]=this["webpackJsonp2.6"]||[]).push([[0],{25:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n.n(c),a=n(19),u=n.n(a),o=(n(25),n(9)),i=n(20),s=n(3),d=n(5),l=n.n(d),j="/persons",h={getAll:function(){return l.a.get(j).then((function(e){return e.data}))},create:function(e){return l.a.post(j,e).then((function(e){return e.data}))},deleteRegister:function(e){return l.a.delete("".concat(j,"/").concat(e)).then((function(e){return e.data}))},updateRegiser:function(e){return l.a.put("".concat(j,"/").concat(e.id),e).then((function(e){return e.data}))}},b=n(0),f=function(e){var t=e.search,n=e.handleChangeSearch;return Object(b.jsxs)(b.Fragment,{children:["Search: ",Object(b.jsx)("input",{value:t,onChange:n})," ",Object(b.jsx)("br",{})]})},m=function(e){var t=e.newName,n=e.number,c=e.handleChangeName,r=e.handleChangeNumber,a=e.handleSubmit;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h2",{children:"Add a new"}),Object(b.jsxs)("form",{onSubmit:a,children:[Object(b.jsxs)("div",{children:["name: ",Object(b.jsx)("input",{value:t,onChange:c})]}),Object(b.jsxs)("div",{children:["number: ",Object(b.jsx)("input",{value:n,onChange:r})]}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{type:"submit",children:"add"})})]})]})},g=function(e){var t=e.personsFiltered,n=e.handleDelete,c=t.map((function(e){return Object(b.jsxs)("div",{children:[Object(b.jsxs)("span",{children:[e.name," : ",e.number]}),Object(b.jsx)("button",{onClick:function(){return n(e.id)},children:"DELETE"})]},e.id)}));return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h2",{children:"Numbers"}),c]})},O=function(e){var t=e.msg,n=e.type;if(!t)return null;var c={borderColor:"ERROR"===n?"red":"green",border:"1px",backgroundColor:"ERROR"===n?"red":"green",padding:15,margin:10};return Object(b.jsx)("div",{style:c,children:Object(b.jsx)("span",{children:t})})},p=function(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),u=Object(s.a)(a,2),d=u[0],l=u[1],j=Object(c.useState)(""),p=Object(s.a)(j,2),x=p[0],v=p[1],C=Object(c.useState)(""),S=Object(s.a)(C,2),y=S[0],w=S[1],R=Object(c.useState)({msg:"",type:""}),E=Object(s.a)(R,2),L=E[0],F=E[1],N=function(e){return n.find((function(t){return t.name===e}))};Object(c.useEffect)((function(){h.getAll().then((function(e){return r(e)}))}),[]);var T=y?n.filter((function(e){return e.name.toLocaleLowerCase().match(y.toLocaleLowerCase())||e.number.toLocaleLowerCase().match(y.toLocaleLowerCase())})):n;return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:"Phonebook"}),Object(b.jsx)(O,{msg:L.msg,type:L.type}),Object(b.jsx)(f,{sarch:y,handleChangeSearch:function(e){w(e.target.value)}}),Object(b.jsx)(m,{newName:d,number:x,handleChangeName:function(e){l(e.target.value)},handleSubmit:function(e){e.preventDefault();var t=N(d);if(t){if(!window.confirm("Are you sure to update ".concat(d,"'s number?")))return!1;t.number=x,h.updateRegiser(t).then((function(){r(n.map((function(e){return e.id!==t.id?e:Object(i.a)({},t)}))),F({msg:"Person Updated succesfully",type:"SUCCESS"}),setTimeout((function(){F({msg:"",type:""})}),3e3)})).catch((function(e){return console.log(e)}))}else h.create({name:d,number:x}).then((function(e){r([].concat(Object(o.a)(n),[e])),F({msg:"Person created succesfully",type:"SUCCESS"}),setTimeout((function(){F({msg:"",type:""})}),3e3)})).catch((function(e){return console.log("Err Here",e)}));l(""),v("")},handleChangeNumber:function(e){v(e.target.value)}}),Object(b.jsx)(g,{personsFiltered:T,handleDelete:function(e){window.confirm("Are you sure to delete the person?")&&h.deleteRegister(e).then((function(){var t=n.findIndex((function(t){return t.id===e}));r([].concat(Object(o.a)(n.slice(0,t)),Object(o.a)(n.slice(t+1,n.length))))})).catch((function(t){F({msg:"The person of id '".concat(e,"' does not exist on the server anymore"),type:"ERROR"}),setTimeout((function(){F({msg:"",type:""})}),3e3)}))}})]})},x=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,46)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,u=t.getTTFB;n(e),c(e),r(e),a(e),u(e)}))};u.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(p,{})}),document.getElementById("root")),x()}},[[45,1,2]]]);
//# sourceMappingURL=main.b1c429c2.chunk.js.map