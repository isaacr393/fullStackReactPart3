(this["webpackJsonp2.6"]=this["webpackJsonp2.6"]||[]).push([[0],{25:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n.n(c),a=n(20),u=n.n(a),o=(n(25),n(9)),i=n(11),s=n(3),d=n(5),j=n.n(d),l="/persons",b={getAll:function(){return j.a.get(l).then((function(e){return e.data}))},create:function(e){return j.a.post(l,e).then((function(e){return e.data}))},deleteRegister:function(e){return j.a.delete("".concat(l,"/").concat(e)).then((function(e){return e.data}))},updateRegiser:function(e){return j.a.put("".concat(l,"/").concat(e.id),e).then((function(e){return e.data}))}},h=n(0),f=function(e){var t=e.search,n=e.handleChangeSearch;return Object(h.jsxs)(h.Fragment,{children:["Search: ",Object(h.jsx)("input",{value:t,onChange:n})," ",Object(h.jsx)("br",{})]})},m=function(e){var t=e.newName,n=e.number,c=e.handleChangeName,r=e.handleChangeNumber,a=e.handleSubmit;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h2",{children:"Add a new"}),Object(h.jsxs)("form",{onSubmit:a,children:[Object(h.jsxs)("div",{children:["name: ",Object(h.jsx)("input",{value:t,onChange:c})]}),Object(h.jsxs)("div",{children:["number: ",Object(h.jsx)("input",{value:n,onChange:r})]}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{type:"submit",children:"add"})})]})]})},g=function(e){var t=e.personsFiltered,n=e.handleDelete,c=t.map((function(e){return Object(h.jsxs)("div",{children:[Object(h.jsxs)("span",{children:[e.name," : ",e.number]}),Object(h.jsx)("button",{onClick:function(){return n(e.id)},children:"DELETE"})]},e.id)}));return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h2",{children:"Numbers"}),c]})},O=function(e){var t=e.msg,n=e.type;if(!t)return null;var c={border:"1px",borderColor:"ERROR"===n?"red":"green",backgroundColor:"ERROR"===n?"red":"green",padding:15,margin:10};return Object(h.jsx)("div",{style:c,children:Object(h.jsx)("span",{children:t})})},p=function(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),u=Object(s.a)(a,2),d=u[0],j=u[1],l=Object(c.useState)(""),p=Object(s.a)(l,2),x=p[0],v=p[1],C=Object(c.useState)(""),y=Object(s.a)(C,2),R=y[0],S=y[1],w=Object(c.useState)({msg:"",type:""}),E=Object(s.a)(w,2),L=E[0],F=E[1],T=function(e){return n.find((function(t){return t.name===e}))};Object(c.useEffect)((function(){b.getAll().then((function(e){return r(e)}))}),[]);var N=R?n.filter((function(e){return e.name.toLocaleLowerCase().match(R.toLocaleLowerCase())||e.number.toLocaleLowerCase().match(R.toLocaleLowerCase())})):n;return Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Phonebook"}),Object(h.jsx)(O,{msg:L.msg,type:L.type}),Object(h.jsx)(f,{sarch:R,handleChangeSearch:function(e){S(e.target.value)}}),Object(h.jsx)(m,{newName:d,number:x,handleChangeName:function(e){j(e.target.value)},handleSubmit:function(e){e.preventDefault();var t=T(d);if(t){if(!window.confirm("Are you sure to update ".concat(d,"'s number?")))return!1;(t=Object(i.a)({},t)).number=x,b.updateRegiser(t).then((function(){F({msg:"Person Updated succesfully",type:"SUCCESS"}),r(n.map((function(e){return e.id!==t.id?e:Object(i.a)({},t)}))),setTimeout((function(){F({msg:"",type:""})}),6e3)})).catch((function(e){F({msg:"".concat(e.response.data.error),type:"ERROR"}),setTimeout((function(){F({msg:"",type:""})}),6e3)}))}else b.create({name:d,number:x}).then((function(e){r([].concat(Object(o.a)(n),[e])),F({msg:"Person created succesfully",type:"SUCCESS"}),setTimeout((function(){F({msg:"",type:""})}),6e3)})).catch((function(e){F({msg:"".concat(e.response.data.error),type:"ERROR"}),setTimeout((function(){F({msg:"",type:""})}),6e3)}));j(""),v("")},handleChangeNumber:function(e){v(e.target.value)}}),Object(h.jsx)(g,{personsFiltered:N,handleDelete:function(e){window.confirm("Are you sure to delete the person?")&&b.deleteRegister(e).then((function(){var t=n.findIndex((function(t){return t.id===e}));r([].concat(Object(o.a)(n.slice(0,t)),Object(o.a)(n.slice(t+1,n.length))))})).catch((function(t){F({msg:"The person of id '".concat(e,"' does not exist on the server anymore"),type:"ERROR"}),setTimeout((function(){F({msg:"",type:""})}),3e3)}))}})]})},x=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,46)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,u=t.getTTFB;n(e),c(e),r(e),a(e),u(e)}))};u.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(p,{})}),document.getElementById("root")),x()}},[[45,1,2]]]);
//# sourceMappingURL=main.48128526.chunk.js.map